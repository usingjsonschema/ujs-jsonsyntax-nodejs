<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: jsonSyntax.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: jsonSyntax.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module jsonSyntax */

/**
 * @fileOverview 
 * Read a file and determine if content is valid JSON syntax.&lt;br/>
 * &lt;br/>
 * Usage: jsonsyntax file&lt;br/>
 * &lt;ul style='list-style-type:none;'>
 *   &lt;li>  file : JSON file to check syntax of&lt;/li>
 * &lt;/ul>
 * Exit code&lt;br/>
 * &lt;ul style='list-style-type:none;'>
 *   &lt;li>0 : for success&lt;/li>
 *   &lt;li>1 : for failure&lt;/li>
 * &lt;/ul>
 */

// file system module
var fs = require ("fs");

/**
 * Error definition thrown when an error occurs.
 * &lt;ul style='list-style-type:none;'>
 *   &lt;li>error code 1: Invalid name&lt;/li>
 *   &lt;li>error code 2: File does not exist&lt;/li>
 *   &lt;li>error code 3: Error reading file&lt;/li>
 *   &lt;li>error code 4: JSON syntax error&lt;/li>
 * &lt;/ul>
 * @param {integer} code - Error number
 * @param {string} message - Text message, suitable for display
 */
function CheckSyntaxError (code, message)
{
    this.name = "CheckSyntaxError";
    this.code = code;
    this.message = message;
}

/**
 * Check syntax of file passed in command line argument.
 * 
 * @param {string} file - File to check
 * @throws {CheckSyntaxError}
 */
function checkSyntax (file) {
    "use strict";

    // verify file provided
    if ((file === null) || (file === undefined)) {
        throw new CheckSyntaxError (1, "Invalid name");
    }

    // verify file exists
    if (fs.existsSync (file) === false) {
        throw new CheckSyntaxError (2, "File not found");
    }

    // read specified file
    var data = null;
    try {
        data = fs.readFileSync (file);
    } catch (e) {
        throw new CheckSyntaxError (3, "Error reading file: " + e.message);
    }

    // parse the data as JSON
    try {
        JSON.parse (data);
    } catch (e) {
        throw new CheckSyntaxError (4, e.message);
    }
}

/**
 * Main - parse file name from command and call syntax check.
 */
function main () {
    "use strict";
    // if wrong number of arguments, print usage message and exit
    if (process.argv.length !== 3) {
        console.log ("Usage: jsonsyntax file");
        console.log ("  file   JSON file to check syntax of");
        process.exit (1);
    }

    // check syntax, displaying result message. Exit with success/fail code.
    try
    {
        var file = process.argv[2];
        checkSyntax (file);
        console.log ("File contains valid JSON content.");
        process.exit (0);
    } catch (e) {
        console.log ("Error: " + e.message);
        process.exit (1);
    }
}

// if module invoked directly, call main
if (require.main === module) {
    main ();
}

exports.CheckSyntaxError = CheckSyntaxError;
exports.checkSyntax = checkSyntax;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-jsonSyntax.html">jsonSyntax</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha8</a> on Tue Jun 24 2014 12:09:28 GMT-0500 (Central Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
